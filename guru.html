<!DOCTYPE html>
<html>
<head>
  <title>Senarai Kehadiran</title>
</head>
<body>
  <h2>Senarai Kehadiran Murid</h2>
  <table border="1" id="jadual">
    <tr>
      <th>No</th>
      <th>Nama Murid</th>
      <th>Masa Daftar</th>
      <th>Status</th>
      <th>Tindakan</th>
    </tr>
  </table>

  <script>
    const url = "https://script.google.com/macros/s/AKfycbzyP3xdStmBZWhTCCiD2d-CZ6HPF97mjPgPfTyYQrcX075vilsSOr48ZLxgLvrJpfQ/exec"; // ganti dengan URL web app

    function loadSenarai() {
      fetch(url + "?action=senarai")
        .then(res => res.json())
        .then(data => {
          let jadual = document.getElementById("jadual");
          jadual.innerHTML = `
            <tr>
              <th>No</th>
              <th>Nama Murid</th>
              <th>Masa Daftar</th>
              <th>Status</th>
              <th>Tindakan</th>
            </tr>`;
          data.forEach(row => {
            let tr = document.createElement("tr");
            tr.innerHTML = `
              <td>${row.no}</td>
              <td>${row.nama}</td>
              <td>${row.masa}</td>
              <td>${row.status}</td>
              <td><button onclick="panggil(${row.no})">Panggil</button></td>`;
            jadual.appendChild(tr);
          });
        })
        .catch(err => alert("Ralat: " + err));
    }

    function panggil(no) {
      fetch(url + "?action=panggil&no=" + no)
        .then(res => res.text())
        .then(msg => alert(msg));
    }

    loadSenarai();
    setInterval(loadSenarai, 5000); // auto refresh setiap 5s
  </script>
</body>
</html>


